
## LLM as a judge  

## Required
- User Input -> Question
- LLM Output -> Response

## 描述
**回應有效性**檢查生成的回應是否包含任何資訊。如果回應內容包含對問題的任何具體資訊，則視為有效；若生成回應因知識有限或問題不明確等原因而無法提供具體資訊，則視為無效回應。**回應有效性分數**可用於識別模型未生成有效資訊的情況。
他不會去參考 RAG 回傳的context

## 計算方法
回應有效性通過以下步驟評估：
1. **判斷回應資訊量**：根據回應內容判斷是否包含有關問題的任何具體資訊。
2. **有效性評分**：若回應包含資訊，則分數接近 1；若回應缺乏具體資訊，則分數接近 0。

## 程式碼
```python
from uptrain import EvalLLM, Evals

# 插入您的 OpenAI API 密鑰
OPENAI_API_KEY = "sk-********************"  

data = [{
    "question": "What is the chemical formula of chlorophyll?",
    "response": "Sorry, I don't have information about that."
}]

# 初始化回應有效性評估
eval_llm = EvalLLM(openai_api_key=OPENAI_API_KEY)

# 計算回應有效性分數
res = eval_llm.evaluate(
    data = data,
    checks = [Evals.VALID_RESPONSE]
)

print(res)
```

範例輸出：
```json
[
   {
      "score_valid_response": 0.0,
      "explanation_valid_response": "Step 1: Identify the question and response.\nQuestion: What is the chemical formula of chlorophyll?\nResponse: Sorry, I don't have information about that.\n\nStep 2: Analyze the response.\nThe response states that the AI assistant does not have information about the chemical formula of chlorophyll. It does not provide any specific information about the chemical formula.\n\nStep 3: Evaluate the response based on the given criteria.\nThe response does not contain any information about the chemical formula of chlorophyll. It simply states the lack of information.\n\nConclusion:\nThe given response does not contain any information.\n\n[Choice]: B\n[Explanation]: The response does not contain any information about the chemical formula of chlorophyll. Therefore, the selected choice is B."
   }
]
```

在這個範例中，回應有效性分數為 0，表示回應未提供任何具體資訊，因此視為無效回應。

## 參考資料：
https://docs.uptrain.ai/predefined-evaluations/response-quality/response-validity