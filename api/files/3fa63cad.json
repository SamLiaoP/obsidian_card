{
  "file_id": "3fa63cad",
  "name": "8.2a1j Context Precision 上下文精確性.md",
  "path": "8. 人工智能/8.2 如何優化RAG服務/8.2a1a 優化指標/8.2a1j Context Precision 上下文精確性.md",
  "content": "\n## Required\n- User Input\n- Retrieved Contexts\n- Reference Contexts\n\n## 描述\n**上下文精確性**衡量檢索到的上下文片段中有多大比例與用戶查詢相關。此分數基於每個檢索片段的 **Precision@k**，計算回應中相關片段的平均比例。**Context Precision** 可通過多種方法計算，分為 LLM 基於模型的上下文精確性評估和非 LLM 基於模型的傳統方法。\n\n### 計算方法\n上下文精確性計算過程如下：\n1. **計算 Precision@k**：每個片段在檢索結果中的排名 \\( k \\) 下，相關片段數量占總片段數的比例。\n2. **上下文精確性**：對所有片段的 Precision@k 取平均，以獲得上下文精確性分數。\n\n### 非 LLM 基於模型的上下文精確性\n- **NonLLMContextPrecisionWithReference**：當有檢索上下文和參考上下文時，使用距離度量方法來判斷檢索片段的相關性。\n\n## 程式碼\n\n### 1. NonLLMContextPrecisionWithReference\n```python\nfrom ragas import SingleTurnSample\nfrom ragas.metrics import NonLLMContextPrecisionWithReference\n\n# 初始化上下文精確性計分器\ncontext_precision = NonLLMContextPrecisionWithReference()\n\nsample = SingleTurnSample(\n    retrieved_contexts=[\"The Eiffel Tower is located in Paris.\"], \n    reference_contexts=[\"Paris is the capital of France.\", \"The Eiffel Tower is one of the most famous landmarks in Paris.\"]\n)\n\n# 計算上下文精確性分數\nawait context_precision.single_turn_ascore(sample)\n```\n\n## 參考資料：\nhttps://docs.ragas.io/en/stable/concepts/metrics/available_metrics/context_precision/?h=context",
  "size": 1090,
  "lines": 38
}