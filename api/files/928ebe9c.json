{
  "file_id": "928ebe9c",
  "name": "8.2a1o Response Validity 回應有效性.md",
  "path": "8. 人工智能/8.2 如何優化RAG服務/8.2a1o Response Validity 回應有效性.md",
  "content": "\n## LLM as a judge  \n\n## Required\n- User Input -> Question\n- LLM Output -> Response\n\n## 描述\n**回應有效性**檢查生成的回應是否包含任何資訊。如果回應內容包含對問題的任何具體資訊，則視為有效；若生成回應因知識有限或問題不明確等原因而無法提供具體資訊，則視為無效回應。**回應有效性分數**可用於識別模型未生成有效資訊的情況。\n他不會去參考 RAG 回傳的context\n\n## 計算方法\n回應有效性通過以下步驟評估：\n1. **判斷回應資訊量**：根據回應內容判斷是否包含有關問題的任何具體資訊。\n2. **有效性評分**：若回應包含資訊，則分數接近 1；若回應缺乏具體資訊，則分數接近 0。\n\n## 程式碼\n```python\nfrom uptrain import EvalLLM, Evals\n\n# 插入您的 OpenAI API 密鑰\nOPENAI_API_KEY = \"sk-********************\"  \n\ndata = [{\n    \"question\": \"What is the chemical formula of chlorophyll?\",\n    \"response\": \"Sorry, I don't have information about that.\"\n}]\n\n# 初始化回應有效性評估\neval_llm = EvalLLM(openai_api_key=OPENAI_API_KEY)\n\n# 計算回應有效性分數\nres = eval_llm.evaluate(\n    data = data,\n    checks = [Evals.VALID_RESPONSE]\n)\n\nprint(res)\n```\n\n範例輸出：\n```json\n[\n   {\n      \"score_valid_response\": 0.0,\n      \"explanation_valid_response\": \"Step 1: Identify the question and response.\\nQuestion: What is the chemical formula of chlorophyll?\\nResponse: Sorry, I don't have information about that.\\n\\nStep 2: Analyze the response.\\nThe response states that the AI assistant does not have information about the chemical formula of chlorophyll. It does not provide any specific information about the chemical formula.\\n\\nStep 3: Evaluate the response based on the given criteria.\\nThe response does not contain any information about the chemical formula of chlorophyll. It simply states the lack of information.\\n\\nConclusion:\\nThe given response does not contain any information.\\n\\n[Choice]: B\\n[Explanation]: The response does not contain any information about the chemical formula of chlorophyll. Therefore, the selected choice is B.\"\n   }\n]\n```\n\n在這個範例中，回應有效性分數為 0，表示回應未提供任何具體資訊，因此視為無效回應。\n\n## 參考資料：\nhttps://docs.uptrain.ai/predefined-evaluations/response-quality/response-validity",
  "size": 1808,
  "lines": 54
}